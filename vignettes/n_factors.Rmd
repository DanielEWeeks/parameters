---
title: "How many factors to retain in Factor Analysis (FA)"
output: 
  github_document:
    toc: true
    fig_width: 10.08
    fig_height: 6
  rmarkdown::html_vignette:
    toc: true
    fig_width: 10.08
    fig_height: 6
tags: [r, parameters, factor analysis, efa, fa, pca, how many factors, n factors]
vignette: >
  %\VignetteIndexEntry{How many factors to retain in Factor Analysis (FA)}
  \usepackage[utf8]{inputenc}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r message=FALSE, warning=FALSE, include=FALSE}
library(knitr)
options(knitr.kable.NA = '')
knitr::opts_chunk$set(comment=">")
options(digits=2)

set.seed(333)
```


When running a **factor analysis (FA)**, one often needs to specify **how many components** (or latent variables) to retain or to extract. This decision is often motivated or supported by some statistical indices and procedures aiming at finding the optimal number of factors. 

Interestingly, a huge amount of methods exist to statistically adress this issue, giving sometimes very different results... Unfortunately, there is no consensus on **which method to use**, or which is the best.


# The Method Agreement procedure

The Method Agreement procedure, first proposed in the [`psycho`](https://neuropsychology.github.io/psycho.R/2018/05/24/n_factors.html) pacakge [@makowski2018psycho], proposes to rely on the consensus of methods, rather than on one method in particular.


This procedure can be easily used via the `n_factors()` function, re-implemented and improved in the [**parameters**](https://github.com/easystats/parameters) package. One can provide a dataframe, and the function will run a large number of routines and reutrn the optimal number of factors based on the higher consensus.  

Let's take a look at the `attitude` data, available is base R:

```{r message=FALSE, warning=FALSE, eval=FALSE}
head(attitude)
```
```{r message=FALSE, warning=FALSE, echo=FALSE}
knitr::kable(head(attitude), digits=2)
```

This dataset is made of 7 variables.

```{r message=FALSE, warning=FALSE}
library(parameters)

results <- parameters::n_factors(attitude)
results
```

One can obtain a summary table or more details as follows:

```{r message=FALSE, warning=FALSE}
as.data.frame(results)
summary(results)
```


